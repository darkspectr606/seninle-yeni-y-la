<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Mutlu YÄ±llar AÅŸkÄ±m â¤ï¸</title>
<style>
body, html {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: 'Segoe UI', sans-serif;
  background: radial-gradient(circle at top, #ff512f, #dd2476, #1a1a2e);
  color: white;
  text-align: center;
  overflow-x: hidden;
}

/* GECE YARISI SAYAÃ‡ */
#countdownOverlay {
  position: fixed;
  inset: 0;
  background: black;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  flex-direction: column;
  color: white;
  font-size: 48px;
  transition: opacity 2s ease;
}

/* ANA Ä°Ã‡ERÄ°K */
.container {
  max-width: 1200px;
  margin: auto;
  padding: 30px 20px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 2s ease;
}

.message {
  margin: 30px auto;
  font-size: 20px;
  line-height: 1.8;
  max-width: 850px;
  min-height: 220px;
}

.music-hint { margin-top: 25px; font-size: 17px; opacity: 0.9; }
.music-btn {
  margin: 25px 0;
  padding: 12px 28px;
  font-size: 16px;
  border: none;
  border-radius: 30px;
  background: #ffcc70;
  color: #222;
  cursor: pointer;
}

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 22px;
  margin-top: 40px;
}
.photo-card {
  background: rgba(255,255,255,0.08);
  border-radius: 18px;
  padding: 10px;
}
.photo-card img {
  width: 100%;
  border-radius: 14px;
  cursor: pointer;
}
.note {
  font-size: 14px;
  margin-top: 6px;
  opacity: 0.9;
  font-style: italic;
}

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
.overlay img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 16px;
  z-index: 2;
}
canvas { position: absolute; inset: 0; }

#final {
  margin: 120px 0 80px;
  font-size: 36px;
  opacity: 0;
  transition: opacity 2s ease;
}

.footer { 
  margin: 50px 0; 
  font-size: 32px;   
  font-weight: 600;  
  color: #ffddcf;    
}

h1 { font-size: 42px; }
.subtitle { font-size: 18px; opacity: 0.9; }
</style>
</head>
<body>

<div id="countdownOverlay">
  â³ Hedef zamana kadar: <span id="countdown">00:00:00</span>
</div>

<canvas id="heartsBg"></canvas>

<div class="container" id="mainContent">
  <h1>ğŸ„ Mutlu YÄ±llar AÅŸkÄ±m â¤ï¸</h1>
  <div class="subtitle">Bu yÄ±l yan yana deÄŸilizâ€¦ ama kalplerimiz hep aynÄ± yerde</div>

  <div class="message" id="typewriter"></div>

  <div class="music-hint">
    ğŸ¶ Devam etmeden Ã¶nce, aÅŸaÄŸÄ±daki tuÅŸa dokunur musun?
  </div>

  <button class="music-btn" id="startBtn">ğŸ’– Dokun ve AnÄ±mÄ±z BaÅŸlasÄ±n ğŸ¶</button>

  <audio id="music" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <div class="gallery" id="gallery"></div>

  <div id="final">â¤ï¸ Ä°yi ki varsÄ±nâ€¦ â¤ï¸</div>

  <div class="footer">ğŸ’Œ Seni Ã§ok seviyorum.</div>
</div>

<div class="overlay" id="overlay" onclick="closeOverlay()">
  <canvas id="fireworks"></canvas>
  <img id="overlayImg">
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
/* ===============================
   TEST SAYAÃ‡ (00:30)
================================= */
const countdownEl = document.getElementById("countdown");
const overlay = document.getElementById("countdownOverlay");
const mainContent = document.getElementById("mainContent");
let countdownDone = false;

// HEDEF SAAT 00:30
const now = new Date();
let target = new Date();
target.setHours(0,30,0,0);
if(target <= now) target.setDate(target.getDate() + 1);

const countdownInterval = setInterval(() => {
  if(countdownDone) return;

  const diff = target - new Date();

  if(diff <= 0){
    countdownDone = true;
    clearInterval(countdownInterval);

    overlay.style.transition = "opacity 2s ease";
    overlay.style.opacity = "0";

    setTimeout(() => {
      overlay.style.display = "none";
      mainContent.style.opacity = "1";
      mainContent.style.pointerEvents = "auto";
      document.body.style.overflow = "auto"; // scroll aÃ§Ä±ldÄ±

      // typewriter baÅŸlat
      typeWriter();

      // konfeti sÃ¼rprizi
      for(let i=0;i<3;i++){
        setTimeout(()=>confetti({ particleCount: 150, spread: 120 }), i*500);
      }
    },2000);

    return;
  }

  const hours = Math.floor(diff / (1000*60*60));
  const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
  const seconds = Math.floor((diff % (1000*60)) / 1000);
  countdownEl.textContent = 
    `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
},1000);

/* ===============================
   TYPEWRITER
================================= */
const text = `Seni dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼m her an bu sayfaya saklandÄ± ğŸ’«

Belki aynÄ± ÅŸehirde deÄŸiliz,
belki yan yana deÄŸilizâ€¦ 
ama kalbim her zaman senin yanÄ±nda â¤ï¸

Mesafeler sadece sayÄ±lardan ibaret.
Benim iÃ§in Ã¶nemli olan tek ÅŸey sensin.

Bu sayfadaki her fotoÄŸraf,
her kelime,
her kÃ¼Ã§Ã¼k detayâ€¦ 
sana olan sevgimin bir parÃ§asÄ±.`;

let i=0;
const tw = document.getElementById("typewriter");
function typeWriter() {
  if(i<text.length){
    tw.innerHTML += text[i]==="\n" ? "<br>" : text[i];
    i++;
    setTimeout(typeWriter,40);
  }
}

/* ===============================
   MÃœZÄ°K
================================= */
const startBtn = document.getElementById("startBtn");
const music = document.getElementById("music");
startBtn.onclick = () => {
  music.play();
  startBtn.style.display = "none";
  confetti({ particleCount: 200, spread: 90 });
};

/* ===============================
   FOTOÄRAFLAR
================================= */
const notes={1:"ilk yavrumuzun bardaktaki tatlÄ± gÃ¼lÃ¼ÅŸÃ¼ğŸ’•",7:"Ah senin ÅŸu ÅŸumarÄ±klÄ±klarÄ±n",15:"Hep bÃ¶yle ÅŸaÅŸÄ±rÄ±caksÄ±n",22:"En sevdiÄŸimiz fotoÄŸraf"};
const g=document.getElementById("gallery");
for(let i=1;i<=25;i++){
  const c=document.createElement("div"); c.className="photo-card";
  const img=document.createElement("img"); img.src=`foto${i}.jpg`; img.onclick=()=>openOverlay(img.src);
  c.appendChild(img);
  if(notes[i]){ const n=document.createElement("div"); n.className="note"; n.innerText=notes[i]; c.appendChild(n); }
  g.appendChild(c);
}

/* ===============================
   OVERLAY + HAVAÄ° FÄ°ÅEK
================================= */
const o=document.getElementById("overlay"), oi=document.getElementById("overlayImg");
const canvas=document.getElementById("fireworks"), ctx=canvas.getContext("2d");
let particles=[];
function openOverlay(src){
  o.style.display="flex"; oi.src=src;
  canvas.width=innerWidth; canvas.height=innerHeight;
  for(let i=0;i<6;i++)setTimeout(explode,i*300);
}
function closeOverlay(){ 
  o.style.display="none"; 
  ctx.clearRect(0,0,canvas.width,canvas.height); 
  particles=[]; 
}
function explode(){
  const x=Math.random()*canvas.width,y=Math.random()*canvas.height/2;
  for(let i=0;i<80;i++)particles.push({x,y,vx:(Math.random()-.5)*6,vy:(Math.random()-.5)*6,life:60,color:`hsl(${Math.random()*360},100%,50%)`});
}
(function anim(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach((p,i)=>{ 
    p.x+=p.vx; p.y+=p.vy; p.life--; 
    ctx.fillStyle=p.color; ctx.beginPath(); ctx.arc(p.x,p.y,2,0,Math.PI*2); ctx.fill(); 
    if(p.life<=0)particles.splice(i,1); 
  });
  requestAnimationFrame(anim);
})();

/* ===============================
   KALP ARKA PLAN â€“ MOBÄ°L UYUMLU
================================= */
const bg=document.getElementById("heartsBg"), bctx=bg.getContext("2d");
function resize(){ bg.width=innerWidth; bg.height=innerHeight; }
resize();
addEventListener("resize",resize);

const isMobile = innerWidth < 768;
const heartCount = isMobile ? 55 : 30;
const hearts = Array.from({length:heartCount},()=>({
  x:Math.random()*bg.width,
  y:Math.random()*bg.height,
  s:isMobile ? Math.random()*18+14 : Math.random()*10+6,
  sp:isMobile ? Math.random()*0.6+0.3 : Math.random()*0.4+0.2,
  o:isMobile ? Math.random()*0.7+0.4 : Math.random()*0.4+0.3
}));
function drawHeart(x,y,s,o){
  bctx.globalAlpha=o;
  bctx.fillStyle="#ff9aa2";
  bctx.beginPath();
  bctx.moveTo(x,y);
  bctx.bezierCurveTo(x-s,y-s,x-2*s,y+s/2,x,y+s);
  bctx.bezierCurveTo(x+2*s,y+s/2,x+s,y-s,x,y);
  bctx.fill();
  bctx.globalAlpha=1;
}
(function animateHearts(){
  bctx.clearRect(0,0,bg.width,bg.height);
  hearts.forEach(h=>{
    drawHeart(h.x,h.y,h.s,h.o);
    h.y-=h.sp;
    if(h.y<-30){ h.y=bg.height+30; h.x=Math.random()*bg.width; }
  });
  requestAnimationFrame(animateHearts);
})();
</script>

</body>
</html>
